<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>microservices - Ye Zheng&#39;s Blog</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Ye Zheng" />
  <meta name="description" content="第1章 微服务 1.1 什么是微服务 微服务就是一些协同工作的小而自治的服务 1.1.1 很小，专注于做好一件事 在一个单块系统内，通常会创建一些抽象层或者模块来保证" />

  <meta name="keywords" content="technique, programming, computer science" />






<meta name="generator" content="Hugo 0.62.2" />


<link rel="canonical" href="http://csyezheng.github.io/content/post/back-end/microservices/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.0995afa14b62cd93e93cfc066b646c4c17a3eddca0e9d52a1d9dcf5d90aaacd3.css" integrity="sha256-CZWvoUtizZPpPPwGa2RsTBej7dyg6dUqHZ3PXZCqrNM=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="microservices" />
<meta property="og:description" content="第1章 微服务 1.1 什么是微服务 微服务就是一些协同工作的小而自治的服务 1.1.1 很小，专注于做好一件事 在一个单块系统内，通常会创建一些抽象层或者模块来保证" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://csyezheng.github.io/content/post/back-end/microservices/" />
<meta property="article:published_time" content="2019-04-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-04-20T00:00:00+00:00" />
<meta itemprop="name" content="microservices">
<meta itemprop="description" content="第1章 微服务 1.1 什么是微服务 微服务就是一些协同工作的小而自治的服务 1.1.1 很小，专注于做好一件事 在一个单块系统内，通常会创建一些抽象层或者模块来保证">
<meta itemprop="datePublished" content="2019-04-20T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-04-20T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="3152">



<meta itemprop="keywords" content="microservices," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="microservices"/>
<meta name="twitter:description" content="第1章 微服务 1.1 什么是微服务 微服务就是一些协同工作的小而自治的服务 1.1.1 很小，专注于做好一件事 在一个单块系统内，通常会创建一些抽象层或者模块来保证"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Ye Zheng's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/">Home</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/post/">Archives</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/tags/">Tags</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/categories/">Categories</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/about/">About</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Ye Zheng's Blog
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/">Home</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/post/">Archives</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/tags/">Tags</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/categories/">Categories</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://csyezheng.github.io/about/">About</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
  
  <header class="post-header">
    <h1 class="post-title">microservices</h1>
    
    <div class="post-meta">
      <time datetime="2019-04-20" class="post-time">
        2019-04-20
      </time>
    </div>
  </header>

  
  
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#第1章-微服务">第1章 微服务</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第2章-演化式架构师">第2章 演化式架构师　</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第3章-如何建模服务">第3章 如何建模服务　</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第4章-集成">第4　章 集成　</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第5章-分解单块系统">第5章 分解单块系统　</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第6章-部署">第6章 部署　</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第7章-测试">第7章 测试</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第8章-监控">第8章 监控</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第9章-安全">第9章 安全</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第10章-康威定律和系统设计">第10章 康威定律和系统设计</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第11章-规模化微服务">第11章 规模化微服务</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#第12章-总结">第12章 总结</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>

  
  <div class="post-content">
      <h2 id="第1章-微服务">第1章 微服务</h2>
<h4 id="11-什么是微服务">1.1 什么是微服务</h4>
<p>微服务就是一些协同工作的小而自治的服务</p>
<h5 id="111很小专注于做好一件事">1.1.1　很小，专注于做好一件事</h5>
<p>在一个单块系统内，通常会创建一些抽象层或者模块来保证代码的<strong>内聚性</strong>，从而避免代码庞大使得在什么地方做修改都很困难．内聚性是指将相关代码放在一起，在考虑使用微服务的时候，内聚性这一概念很重要．</p>
<p>微服务将这个理念应用在服务上，根据业务的边界确定服务的边界，进而确定某个功能代码应该放在哪里．</p>
<h5 id="112自治性">1.1.2　自治性</h5>
<p>一个微服务就是一个独立的实体，它可以独立地部署在PAAS（Platform As A Service) 上，也可以作为一个操作系统的进程存在．服务会暴露出API，服务之间通过这些API进行通信，从而加强服务之间的隔离性，<strong>避免紧耦合</strong>．</p>
<h4 id="12-主要好处">1.2 主要好处</h4>
<h5 id="121技术异构性">1.2.1　技术异构性</h5>
<p>每个服务可以用不同的语言编写，后端采用不同的数据库．</p>
<h5 id="122弹性">1.2.2　弹性</h5>
<h5 id="123扩展">1.2.3　扩展</h5>
<p>可以只对需要扩展的服务进行扩展，把不需要扩展的服务运行在更小，性能稍差的硬件上．</p>
<h5 id="124简化部署">1.2.4　简化部署</h5>
<p>各服务独立部署，出现版本问题，只会影响一个服务，能快速回滚．</p>
<h5 id="125与组织结构相匹配">1.2.5　与组织结构相匹配</h5>
<h5 id="126可组合性">1.2.6　可组合性</h5>
<h5 id="127对可替代性的优化">1.2.7　对可替代性的优化</h5>
<h4 id="13-面向服务的架构">1.3 面向服务的架构</h4>
<p>可以认为微服务架构是SOA的一种特定方法．</p>
<h4 id="14-其他分解技术">1.4 其他分解技术</h4>
<h5 id="141共享库">1.4.1　共享库</h5>
<h5 id="142模块">1.4.2　模块</h5>
<h4 id="15-没有银弹">1.5 没有银弹</h4>
<p>微服务不是免费的午餐，更不是银弹．每个公司，组织及系统都不一样，微服务未必就是适合，简单的MVC架构也未必就是不好的．</p>
<h4 id="16-小结">1.6 小结　</h4>
<h2 id="第2章-演化式架构师">第2章 演化式架构师　</h2>
<h4 id="21-不准确的比较">2.1 不准确的比较　</h4>
<h4 id="22-架构师的演化视角">2.2 架构师的演化视角　</h4>
<h4 id="23-分区">2.3 分区　</h4>
<p>每一个服务内部可以允许团队自己选择不同的技术栈或数据存储技术，但服务之间的调用方式最好统一，不要一个服务采用HTTP暴露REST接口，另一个服务使用RPC方式的protocol buffers．</p>
<h4 id="24-一个原则性的方法">2.4 一个原则性的方法　</h4>
<h5 id="241战略目标">2.4.1　战略目标　</h5>
<ul>
<li>保证业务伸缩性</li>
<li>支持进入新市场</li>
<li>支持现有市场中的创新</li>
</ul>
<h5 id="242原则">2.4.2　原则　</h5>
<ul>
<li>减小惯性</li>
<li>消除偶发复杂度</li>
<li>一致的接口和数据流</li>
</ul>
<h5 id="243实践">2.4.3　实践　</h5>
<h5 id="244将原则和实践相结合">2.4.4　将原则和实践相结合　</h5>
<ul>
<li>标准REST/HTTP</li>
<li>封装遗留系统</li>
<li>消除集成数据库</li>
<li>合并并净化数据</li>
<li>发布集成模型</li>
<li>小规模独立服务</li>
<li>持续部署</li>
<li>对COTS/SAAS进行最小化定制</li>
</ul>
<h5 id="245真实世界的例子">2.4.5　真实世界的例子　</h5>
<h4 id="25要求的标准">2.5.要求的标准　</h4>
<h5 id="251监控">2.5.1　监控　</h5>
<p>检测每个服务的健康状态，确保所有的服务使用同样的报告健康状态及其与监控相关的数据．</p>
<p>使用推送机制，每个服务主动把数据推送到某个集中的位置，使用Graphite收集指标数据，使用Nagios检测健康状态．</p>
<p>或者使用轮询系统来从各个节点收集数据．</p>
<p>无论选择哪个方案，尽量保持标准化，每个服务都采用相同的方式．日志功能和监控类似，也需要集中式管理．</p>
<h5 id="252接口">2.5.2　接口　</h5>
<p>HTTP/REST</p>
<p>GRPC</p>
<h5 id="253架构安全性">2.5.3　架构安全性　</h5>
<p>必须要保证每个服务都可以应对下游服务的错误请求，至少让每个下游服务使用它们自己的连接池，进一步让每个服务使用一个断路器．</p>
<p>返回码遵循一定的规则，如HTTP状态码．</p>
<h4 id="26代码治理">2.6.代码治理　</h4>
<p>治理就是确保构建的系统符合愿景，在需要的使用应对愿景进行演化．</p>
<h5 id="261范例">2.6.1　范例　</h5>
<h5 id="262裁剪服务代码模板">2.6.2　裁剪服务代码模板　</h5>
<h4 id="27-技术债务">2.7 技术债务　</h4>
<h4 id="28-例外管理">2.8 例外管理　</h4>
<p>海量存储场景下MySQL to Cassandra</p>
<h4 id="29-集中治理和领导">2.9 集中治理和领导　</h4>
<h4 id="210-建设团队">2.10 　建设团队　</h4>
<h4 id="211小结">2.11　小结　</h4>
<p>演进式架构师应该理解，成功要靠不断地<strong>取舍</strong>来实现，总会存在一些原因需要你改变所构建好的系统，但是具体需要做哪些改变只能依靠自己的经验了．而僵化地固守自己的想法无疑是最糟糕的做法．</p>
<h2 id="第3章-如何建模服务">第3章 如何建模服务　</h2>
<h4 id="31musiccorp-简介">3.1　MusicCorp 简介　</h4>
<h4 id="32什么样的服务是好服务">3.2　什么样的服务是好服务　</h4>
<h5 id="321松耦合">3.2.1　松耦合　</h5>
<h5 id="322高内聚">3.2.2　高内聚　</h5>
<h4 id="33限界上下文">3.3　限界上下文　</h4>
<h5 id="331共享的隐藏模型">3.3.1　共享的隐藏模型　</h5>
<h5 id="332模块和服务">3.3.2　模块和服务　</h5>
<h5 id="333过早划分">3.3.3　过早划分　</h5>
<h4 id="34业务功能">3.4　业务功能　</h4>
<h4 id="35逐步划分上下文">3.5　逐步划分上下文　</h4>
<h4 id="36关于业务概念的沟通">3.6　关于业务概念的沟通　</h4>
<h4 id="37技术边界">3.7　技术边界　</h4>
<h4 id="38小结">3.8　小结　</h4>
<h2 id="第4章-集成">第4　章 集成　</h2>
<h4 id="41寻找理想的集成技术">4.1　寻找理想的集成技术　</h4>
<h5 id="411避免破坏性修改">4.1.1　避免破坏性修改　</h5>
<h5 id="412保证api-的技术无关性">4.1.2　保证API 的技术无关性　</h5>
<h5 id="413使你的服务易于消费方使用">4.1.3　使你的服务易于消费方使用　</h5>
<h5 id="414隐藏内部实现细节">4.1.4　隐藏内部实现细节　</h5>
<h4 id="42为用户创建接口">4.2　为用户创建接口　</h4>
<h4 id="43共享数据库">4.3　共享数据库　</h4>
<h4 id="44同步与异步">4.4　同步与异步　</h4>
<h4 id="45编排与协同">4.5　编排与协同　</h4>
<h4 id="46远程过程调用">4.6　远程过程调用　</h4>
<h5 id="461技术的耦合">4.6.1　技术的耦合　</h5>
<h5 id="462本地调用和远程调用并不相同">4.6.2　本地调用和远程调用并不相同　</h5>
<h5 id="463脆弱性">4.6.3　脆弱性　</h5>
<h5 id="464rpc-很糟糕吗">4.6.4　RPC 很糟糕吗　</h5>
<h4 id="47rest">4.7　REST　</h4>
<h5 id="471rest-和http">4.7.1　REST 和HTTP　</h5>
<h5 id="472超媒体作为程序状态的引擎">4.7.2　超媒体作为程序状态的引擎　</h5>
<h5 id="473jsonxml-还是其他">4.7.3　JSON、XML 还是其他　</h5>
<h5 id="474留心过多的约定">4.7.4　留心过多的约定　</h5>
<h5 id="475基于http-的rest-的缺点">4.7.5　基于HTTP 的REST 的缺点　</h5>
<h4 id="48实现基于事件的异步协作方式">4.8　实现基于事件的异步协作方式　</h4>
<h5 id="481技术选择">4.8.1　技术选择　</h5>
<h5 id="482异步架构的复杂性">4.8.2　异步架构的复杂性　</h5>
<h4 id="49服务即状态机">4.9　服务即状态机　</h4>
<h4 id="410响应式扩展">4.10　响应式扩展　</h4>
<h4 id="411微服务世界中的dry-和代码重用的危险">4.11　微服务世界中的DRY 和代码重用的危险　</h4>
<h4 id="412按引用访问">4.12　按引用访问　</h4>
<h4 id="413版本管理">4.13　版本管理　</h4>
<h5 id="4131尽可能推迟">4.13.1　尽可能推迟　</h5>
<h5 id="4132及早发现破坏性修改">4.13.2　及早发现破坏性修改　</h5>
<h5 id="4133使用语义化的版本管理">4.13.3　使用语义化的版本管理　</h5>
<h5 id="4134不同的接口共存">4.13.4　不同的接口共存　</h5>
<h5 id="4135同时使用多个版本的服务">4.13.5　同时使用多个版本的服务　</h5>
<h4 id="414用户界面">4.14　用户界面　</h4>
<h5 id="4141走向数字化">4.14.1　走向数字化　</h5>
<h5 id="4142约束">4.14.2　约束　</h5>
<h5 id="4143api-组合">4.14.3　API 组合　</h5>
<h5 id="4144ui-片段的组合">4.14.4　UI 片段的组合　</h5>
<h5 id="4145为前端服务的后端">4.14.5　为前端服务的后端　</h5>
<h5 id="4146一种混合方式">4.14.6　一种混合方式　</h5>
<h4 id="415与第三方软件集成">4.15　与第三方软件集成　</h4>
<h5 id="4151缺乏控制">4.15.1　缺乏控制　</h5>
<h5 id="4152定制化">4.15.2　定制化　</h5>
<h5 id="4153意大利面式的集成">4.15.3　意大利面式的集成　</h5>
<h5 id="4154在自己可控的平台进行定制化">4.15.4　在自己可控的平台进行定制化　</h5>
<h5 id="4155绞杀者模式">4.15.5　绞杀者模式　</h5>
<h4 id="416小结">4.16　小结　</h4>
<h2 id="第5章-分解单块系统">第5章 分解单块系统　</h2>
<h4 id="51关键是接缝">5.1　关键是接缝　</h4>
<h4 id="52分解musiccorp">5.2　分解MusicCorp　</h4>
<h4 id="53分解单块系统的原因">5.3　分解单块系统的原因　</h4>
<h5 id="531改变的速度">5.3.1　改变的速度　</h5>
<h5 id="532团队结构">5.3.2　团队结构　</h5>
<h5 id="533安全">5.3.3　安全　</h5>
<h5 id="534技术">5.3.4　技术　</h5>
<h4 id="54杂乱的依赖">5.4　杂乱的依赖　</h4>
<h4 id="55数据库">5.5　数据库　</h4>
<h4 id="56找到问题的关键">5.6　找到问题的关键　</h4>
<h4 id="57例子打破外键关系">5.7　例子：打破外键关系　</h4>
<h4 id="58例子共享静态数据">5.8　例子：共享静态数据　</h4>
<h4 id="59例子共享数据">5.9　例子：共享数据　</h4>
<h4 id="510例子共享表">5.10　例子：共享表　</h4>
<h4 id="511重构数据库">5.11　重构数据库　</h4>
<h4 id="512事务边界">5.12　事务边界　</h4>
<h5 id="5121再试一次">5.12.1　再试一次　</h5>
<h5 id="5122终止整个操作">5.12.2　终止整个操作　</h5>
<h5 id="5123分布式事务">5.12.3　分布式事务　</h5>
<h5 id="5124应该怎么办呢">5.12.4　应该怎么办呢　</h5>
<h4 id="513报告">5.13　报告　</h4>
<h4 id="514报告数据库">5.14　报告数据库　</h4>
<h4 id="515通过服务调用来获取数据">5.15　通过服务调用来获取数据　</h4>
<h4 id="516数据导出">5.16　数据导出　</h4>
<h4 id="517事件数据导出">5.17　事件数据导出　</h4>
<h4 id="518数据导出的备份">5.18　数据导出的备份　</h4>
<h4 id="519走向实时">5.19　走向实时　</h4>
<h4 id="520修改的代价">5.20　修改的代价　</h4>
<h4 id="521理解根本原因">5.21　理解根本原因　</h4>
<h4 id="522小结">5.22　小结　</h4>
<h2 id="第6章-部署">第6章 部署　</h2>
<h4 id="61持续集成简介">6.1　持续集成简介　</h4>
<h4 id="62把持续集成映射到微服务">6.2　把持续集成映射到微服务　</h4>
<h4 id="63构建流水线和持续交付">6.3　构建流水线和持续交付　</h4>
<h4 id="64平台特定的构建物">6.4　平台特定的构建物　</h4>
<h4 id="65操作系统构建物">6.5　操作系统构建物　</h4>
<h4 id="66定制化镜像">6.6　定制化镜像　</h4>
<h5 id="661将镜像作为构建物">6.6.1　将镜像作为构建物　</h5>
<h5 id="662不可变服务器">6.6.2　不可变服务器　</h5>
<h4 id="67环境">6.7　环境　</h4>
<h4 id="68服务配置">6.8　服务配置　</h4>
<h4 id="69服务与主机之间的映射">6.9　服务与主机之间的映射　</h4>
<h5 id="691单主机多服务">6.9.1　单主机多服务　</h5>
<h5 id="692应用程序容器">6.9.2　应用程序容器　</h5>
<h5 id="693每个主机一个服务">6.9.3　每个主机一个服务</h5>
<h5 id="694平台即服务">6.9.4　平台即服务</h5>
<h4 id="610自动化">6.10　自动化</h4>
<h4 id="611从物理机到虚拟机">6.11　从物理机到虚拟机</h4>
<h5 id="6111传统的虚拟化技术">6.11.1　传统的虚拟化技术</h5>
<h5 id="6112vagrant">6.11.2　Vagrant</h5>
<h5 id="6113linux-容器">6.11.3　Linux 容器</h5>
<h5 id="6114docker">6.11.4　Docker</h5>
<h4 id="612一个部署接口">6.12　一个部署接口</h4>
<h4 id="613小结">6.13　小结</h4>
<h2 id="第7章-测试">第7章 测试</h2>
<h4 id="71测试类型">7.1　测试类型</h4>
<h4 id="72测试范围">7.2　测试范围</h4>
<h5 id="721单元测试">7.2.1　单元测试</h5>
<h5 id="722服务测试">7.2.2　服务测试</h5>
<h5 id="723端到端测试">7.2.3　端到端测试</h5>
<h5 id="724权衡">7.2.4　权衡</h5>
<h5 id="725比例">7.2.5　比例</h5>
<h4 id="73实现服务测试">7.3　实现服务测试</h4>
<h5 id="731mock-还是打桩">7.3.1　mock 还是打桩</h5>
<h5 id="732智能的打桩服务">7.3.2　智能的打桩服务</h5>
<h4 id="74微妙的端到端测试">7.4　微妙的端到端测试</h4>
<h4 id="75端到端测试的缺点">7.5　端到端测试的缺点</h4>
<h4 id="76脆弱的测试">7.6　脆弱的测试</h4>
<h5 id="761谁来写这些测试">7.6.1　谁来写这些测试</h5>
<h5 id="762测试多长时间">7.6.2　测试多长时间</h5>
<h5 id="763大量的堆积">7.6.3　大量的堆积</h5>
<h5 id="764元版本">7.6.4　元版本</h5>
<h4 id="77测试场景而不是故事">7.7　测试场景，而不是故事</h4>
<h4 id="78拯救消费者驱动的测试">7.8　拯救消费者驱动的测试</h4>
<h5 id="781pact">7.8.1　Pact</h5>
<h5 id="782关于沟通">7.8.2　关于沟通</h5>
<h4 id="79还应该使用端到端测试吗">7.9　还应该使用端到端测试吗</h4>
<h4 id="710部署后再测试">7.10　部署后再测试</h4>
<h5 id="7101区分部署和上线">7.10.1　区分部署和上线</h5>
<h5 id="7102金丝雀发布">7.10.2　金丝雀发布</h5>
<h5 id="7103平均修复时间胜过平均故障间隔时间">7.10.3　平均修复时间胜过平均故障间隔时间</h5>
<h4 id="711跨功能的测试">7.11　跨功能的测试</h4>
<h4 id="712小结">7.12　小结</h4>
<h2 id="第8章-监控">第8章 监控</h2>
<h4 id="81单一服务单一服务器">8.1　单一服务，单一服务器</h4>
<h4 id="82单一服务多个服务器">8.2　单一服务，多个服务器</h4>
<h4 id="83多个服务多个服务器">8.3　多个服务，多个服务器</h4>
<h4 id="84日志日志更多的日志">8.4　日志，日志，更多的日志</h4>
<h4 id="85多个服务的指标跟踪">8.5　多个服务的指标跟踪</h4>
<h4 id="86服务指标">8.6　服务指标</h4>
<h4 id="87综合监控">8.7　综合监控</h4>
<h4 id="88关联标识">8.8　关联标识</h4>
<h4 id="89级联">8.9　级联</h4>
<h4 id="810标准化">8.10　标准化</h4>
<h4 id="811考虑受众">8.11　考虑受众</h4>
<h4 id="812未来">8.12　未来</h4>
<h4 id="813小结">8.13　小结</h4>
<h2 id="第9章-安全">第9章 安全</h2>
<h4 id="91身份验证和授权">9.1　身份验证和授权</h4>
<h5 id="911常见的单点登录实现">9.1.1　常见的单点登录实现</h5>
<h5 id="912单点登录网关">9.1.2　单点登录网关</h5>
<h5 id="913细粒度的授权">9.1.3　细粒度的授权</h5>
<h4 id="92服务间的身份验证和授权">9.2　服务间的身份验证和授权</h4>
<h5 id="921在边界内允许一切">9.2.1　在边界内允许一切</h5>
<h5 id="922https-基本身份验证">9.2.2　HTTP(S) 基本身份验证</h5>
<h5 id="923使用saml-或openid-connect">9.2.3　使用SAML 或OpenID Connect</h5>
<h5 id="924客户端证书">9.2.4　客户端证书</h5>
<h5 id="925http-之上的hmac">9.2.5　HTTP 之上的HMAC</h5>
<h5 id="926api-密钥">9.2.6　API 密钥</h5>
<h5 id="927代理问题">9.2.7　代理问题</h5>
<h4 id="93静态数据的安全">9.3　静态数据的安全</h4>
<h5 id="931使用众所周知的加密算法">9.3.1　使用众所周知的加密算法</h5>
<h5 id="932一切皆与密钥相关">9.3.2　一切皆与密钥相关</h5>
<h5 id="933选择你的目标">9.3.3　选择你的目标</h5>
<h5 id="934按需解密">9.3.4　按需解密</h5>
<h5 id="935加密备份">9.3.5　加密备份</h5>
<h4 id="94深度防御">9.4　深度防御</h4>
<h5 id="941防火墙">9.4.1　防火墙</h5>
<h5 id="942日志">9.4.2　日志</h5>
<h5 id="943入侵检测和预防系统">9.4.3　入侵检测（和预防）系统</h5>
<h5 id="944网络隔离">9.4.4　网络隔离</h5>
<h5 id="945操作系统">9.4.5　操作系统</h5>
<h4 id="95一个示例">9.5　一个示例</h4>
<h4 id="96保持节俭">9.6　保持节俭</h4>
<h4 id="97人的因素">9.7　人的因素</h4>
<h4 id="98黄金法则">9.8　黄金法则</h4>
<h4 id="99内建安全">9.9　内建安全</h4>
<h4 id="910外部验证">9.10　外部验证</h4>
<h4 id="911小结">9.11　小结</h4>
<h2 id="第10章-康威定律和系统设计">第10章 康威定律和系统设计</h2>
<h4 id="101证据">10.1　证据</h4>
<h5 id="1011松耦合组织和紧耦合组织">10.1.1　松耦合组织和紧耦合组织</h5>
<h5 id="1012windows-vista">10.1.2　Windows Vista</h5>
<h4 id="102netflix-和amazon">10.2　Netflix 和Amazon</h4>
<h4 id="103我们可以做什么">10.3　我们可以做什么</h4>
<h4 id="104适应沟通途径">10.4　适应沟通途径</h4>
<h4 id="105服务所有权">10.5　服务所有权</h4>
<h4 id="106共享服务的原因">10.6　共享服务的原因</h4>
<h5 id="1061难以分割">10.6.1　难以分割</h5>
<h5 id="1062特性团队">10.6.2　特性团队</h5>
<h5 id="1063交付瓶颈">10.6.3　交付瓶颈</h5>
<h4 id="107内部开源">10.7　内部开源</h4>
<h5 id="1071守护者的角色">10.7.1　守护者的角色</h5>
<h5 id="1072成熟">10.7.2　成熟</h5>
<h5 id="1073工具">10.7.3　工具</h5>
<h4 id="108限界上下文和团队结构">10.8　限界上下文和团队结构</h4>
<h4 id="109孤儿服务">10.9　孤儿服务</h4>
<h4 id="1010案例研究realestatecomau">10.10　案例研究：RealEstate.com.au</h4>
<h4 id="1011反向的康威定律">10.11　反向的康威定律</h4>
<h4 id="1012人">10.12　人</h4>
<h4 id="1013小结">10.13　小结</h4>
<h2 id="第11章-规模化微服务">第11章 规模化微服务</h2>
<h4 id="111故障无处不在">11.1　故障无处不在</h4>
<h4 id="112多少是太多">11.2　多少是太多</h4>
<h4 id="113功能降级">11.3　功能降级</h4>
<h4 id="114架构性安全措施">11.4　架构性安全措施</h4>
<h4 id="115反脆弱的组织">11.5　反脆弱的组织</h4>
<h5 id="1151超时">11.5.1　超时</h5>
<h5 id="1152断路器">11.5.2　断路器</h5>
<h5 id="1153舱壁">11.5.3　舱壁</h5>
<h5 id="1154隔离">11.5.4　隔离</h5>
<h4 id="116幂等">11.6　幂等</h4>
<h4 id="117扩展">11.7　扩展</h4>
<h5 id="1171更强大的主机">11.7.1　更强大的主机</h5>
<h5 id="1172拆分负载">11.7.2　拆分负载</h5>
<h5 id="1173分散风险">11.7.3　分散风险</h5>
<h5 id="1174负载均衡">11.7.4　负载均衡</h5>
<h5 id="1175基于worker-的系统">11.7.5　基于worker 的系统</h5>
<h5 id="1176重新设计">11.7.6　重新设计</h5>
<h4 id="118扩展数据库">11.8　扩展数据库</h4>
<h5 id="1181服务的可用性和数据的持久性">11.8.1　服务的可用性和数据的持久性</h5>
<h5 id="1182扩展读取">11.8.2　扩展读取</h5>
<h5 id="1182扩展写操作">11.8.2　扩展写操作</h5>
<h5 id="1184共享数据库基础设施">11.8.4　共享数据库基础设施</h5>
<h5 id="1185cqrs">11.8.5　CQRS</h5>
<h4 id="119缓存">11.9　缓存</h4>
<h5 id="1191客户端-代理和服务器端缓存">11.9.1　客户端、 代理和服务器端缓存</h5>
<h5 id="1192http-缓存">11.9.2　HTTP 缓存</h5>
<h5 id="1193为写使用缓存">11.9.3　为写使用缓存</h5>
<h5 id="1194为弹性使用缓存">11.9.4　为弹性使用缓存</h5>
<h5 id="1195隐藏源服务">11.9.5　隐藏源服务</h5>
<h5 id="1196保持简单">11.9.6　保持简单</h5>
<h5 id="1197缓存中毒一个警示">11.9.7　缓存中毒：一个警示</h5>
<h4 id="1110自动伸缩">11.10　自动伸缩</h4>
<h4 id="1111cap-定理">11.11　CAP 定理</h4>
<h5 id="11111牺牲一致性">11.11.1　牺牲一致性</h5>
<h5 id="11112牺牲可用性">11.11.2　牺牲可用性</h5>
<h5 id="11113牺牲分区容忍性">11.11.3　牺牲分区容忍性</h5>
<h5 id="11114ap-还是cp">11.11.4　AP 还是CP</h5>
<h5 id="11115这不是全部或全不">11.11.5　这不是全部或全不</h5>
<h5 id="11116真实世界">11.11.6　真实世界</h5>
<h4 id="1112服务发现">11.12　服务发现</h4>
<h4 id="1113动态服务注册">11.13　动态服务注册</h4>
<h5 id="11131zookeeper">11.13.1　Zookeeper</h5>
<h5 id="11132consul">11.13.2　Consul</h5>
<h5 id="11134构造你自己的系统">11.13.4　构造你自己的系统</h5>
<h5 id="11135别忘了人">11.13.5　别忘了人</h5>
<h5 id="1114文档服务">11.14　文档服务</h5>
<h5 id="11141swagger">11.14.1　Swagger</h5>
<h5 id="11142hal-和hal-浏览器">11.14.2　HAL 和HAL 浏览器</h5>
<h4 id="1115自描述系统">11.15　自描述系统</h4>
<h4 id="1116小结">11.16　小结</h4>
<h2 id="第12章-总结">第12章 总结</h2>
<h4 id="121微服务的原则">12.1　微服务的原则</h4>
<h5 id="1211围绕业务概念建模">12.1.1　围绕业务概念建模</h5>
<h5 id="1212接受自动化文化">12.1.2　接受自动化文化</h5>
<h5 id="1213隐藏内部实现细节">12.1.3　隐藏内部实现细节</h5>
<h5 id="1214让一切都去中心化">12.1.4　让一切都去中心化</h5>
<h5 id="1215可独立部署">12.1.5　可独立部署</h5>
<h5 id="1216隔离失败">12.1.6　隔离失败</h5>
<h5 id="1217高度可观察">12.1.7　高度可观察</h5>
<h4 id="122什么时候你不应该使用微服务">12.2　什么时候你不应该使用微服务</h4>

  </div>

  
  
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Ye Zheng</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
      2019-04-20
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


  
  
</article>




  

  
  

  

  

  

    

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:csyezheng@gmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://stackoverflow.com/users/5694480" rel="me noopener" class="iconfont"
      title="stack-overflow"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M809.714286 932.571429l-638.857143 0 0-274.285714-91.428571 0 0 365.714286 821.714286 0 0-365.714286-91.428571 0 0 274.285714zm-538.285714-299.428571l18.857143-89.714286 447.428571 94.285714-18.857143 89.142857zm58.857143-213.714286l38.285714-83.428571 414.285714 193.714286-38.285714 82.857143zm114.857143-203.428571l58.285714-70.285714 350.857143 293.142857-58.285714 70.285714zm226.857143-216l272.571429 366.285714-73.142857 54.857143-272.571429-366.285714zm-410.285714 840.571429l0-90.857143 457.142857 0 0 90.857143-457.142857 0z"></path>
</svg>

    </a>
  
    <a href="https://www.linkedin.com/in/%E7%83%A8-%E9%83%91-a2a987100/" rel="me noopener" class="iconfont"
      title="linkedin"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="33" height="33">
  <path d="M872.405333 872.618667h-151.637333v-237.610667c0-56.661333-1.152-129.578667-79.018667-129.578667-79.061333 0-91.136 61.653333-91.136 125.397334v241.792H398.976V384h145.664v66.602667h1.962667c20.352-38.4 69.845333-78.933333 143.786666-78.933334 153.642667 0 182.058667 101.12 182.058667 232.746667v268.202667zM227.712 317.141333a87.978667 87.978667 0 0 1-88.021333-88.106666 88.064 88.064 0 1 1 88.021333 88.106666z m76.032 555.477334H151.68V384h152.064v488.618667zM948.266667 0H75.562667C33.792 0 0 33.024 0 73.770667v876.458666C0 991.018667 33.792 1024 75.562667 1024h872.576C989.866667 1024 1024 991.018667 1024 950.229333V73.770667C1024 33.024 989.866667 0 948.138667 0h0.128z"></path>
</svg>

    </a>
  
    <a href="https://github.com/csyezheng" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="http://csyezheng.github.io/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
   
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/csyezheng/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2017 -
    2020
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Ye Zheng
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  















</body>
</html>
